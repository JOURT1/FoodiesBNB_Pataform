<div class="foodie-application-container">
  <!-- Header -->
  <header class="header">
    <div class="header-left">
      <button class="hamburger-menu" (click)="toggleSidebar()" [class.active]="sidebarOpen">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>
      <img src="assets/logo.png" alt="FoodiesBNB Logo" class="header-logo">
    </div>
  </header>

  <!-- Sidebar Menu -->
  <div class="sidebar-overlay" [class.active]="sidebarOpen" (click)="closeSidebar()"></div>
  <nav class="sidebar" [class.active]="sidebarOpen">
    <div class="sidebar-logo-section">
      <img src="assets/logo.png" alt="FoodiesBNB Logo" class="sidebar-logo">
    </div>
    <ul class="sidebar-menu">
      <li class="menu-item">
        <a class="menu-link active" (click)="navigateToSection('foodie'); $event.preventDefault()">
          <span class="menu-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"></path>
              <path d="M7 2v20"></path>
              <path d="M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"></path>
            </svg>
          </span>
          <span class="menu-text">Foodie</span>
        </a>
      </li>
      <li class="menu-item">
        <a class="menu-link" (click)="goToDashboard(); $event.preventDefault()">
          <span class="menu-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 6h18"></path>
              <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
              <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
              <line x1="10" x2="10" y1="11" y2="17"></line>
              <line x1="14" x2="14" y1="11" y2="17"></line>
            </svg>
          </span>
          <span class="menu-text">Dashboard</span>
        </a>
      </li>
      <li class="menu-item">
        <a class="menu-link" (click)="navigateToSection('cuenta'); $event.preventDefault()">
          <span class="menu-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
          </span>
          <span class="menu-text">Cuenta</span>
        </a>
      </li>
    </ul>
    <div class="sidebar-footer">
      <button class="logout-btn" (click)="logout()">
        <span class="menu-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
            <polyline points="16,17 21,12 16,7"></polyline>
            <line x1="21" x2="9" y1="12" y2="12"></line>
          </svg>
        </span>
        <span class="menu-text">Cerrar Sesi√≥n</span>
      </button>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-content">
    <div class="content-header">
      <h1>Aplicaci√≥n Para <span class="highlight">Foodies</span></h1>
      <p class="subtitle">Completa la informaci√≥n y √∫nete a FoodiesBNB.</p>
    </div>

    <!-- Requisitos -->
    <div class="requirements-section">
      <div class="requirements-header">
        <i class="fas fa-star-of-life"></i>
        <h3>Requisitos para ser Foodie</h3>
      </div>
      <div class="requirements-grid">
        <div class="requirement-card">
          <div class="requirement-icon">
            <i class="fab fa-instagram"></i>
          </div>
          <div class="requirement-content">
            <h4>Contenido en Redes</h4>
            <p>Subir contenido a Instagram o TikTok regularmente</p>
          </div>
        </div>
        
        <div class="requirement-card">
          <div class="requirement-icon">
            <i class="fas fa-users"></i>
          </div>
          <div class="requirement-content">
            <h4>M√≠nimo de Seguidores</h4>
            <p>Tener m√≠nimo <span class="highlight-number">1.000 seguidores</span> en cualquier plataforma</p>
          </div>
        </div>
        
        <div class="requirement-card">
          <div class="requirement-icon">
            <i class="fas fa-unlock"></i>
          </div>
          <div class="requirement-content">
            <h4>Cuenta P√∫blica</h4>
            <p>Tener la cuenta de Instagram p√∫blica, no privada</p>
          </div>
        </div>
      </div>
    </div>

      <!-- Formulario -->
      <form [formGroup]="foodieForm" (ngSubmit)="onSubmit()" class="application-form">
        
        <!-- Informaci√≥n Personal -->
        <div class="form-group">
          <label for="nombreCompleto">
            Nombre y apellido *
            <span *ngIf="foodieForm.get('nombreCompleto')?.valid" style="color: green; margin-left: 5px;">‚úÖ</span>
            <span *ngIf="foodieForm.get('nombreCompleto')?.invalid && foodieForm.get('nombreCompleto')?.touched" style="color: red; margin-left: 5px;">‚ùå</span>
          </label>
          <input 
            type="text" 
            id="nombreCompleto" 
            formControlName="nombreCompleto"
            placeholder="Nombre y apellido"
            class="form-control">
        </div>

        <div class="form-group">
          <label for="email">
            Email *
            <span *ngIf="foodieForm.get('email')?.valid" style="color: green; margin-left: 5px;">‚úÖ</span>
            <span *ngIf="foodieForm.get('email')?.invalid && foodieForm.get('email')?.touched" style="color: red; margin-left: 5px;">‚ùå</span>
          </label>
          <input 
            type="email" 
            id="email" 
            formControlName="email"
            placeholder="Email"
            class="form-control">
        </div>

        <div class="form-group">
          <label for="numeroPersonal">
            N√∫mero personal *
            <span *ngIf="foodieForm.get('numeroPersonal')?.valid" style="color: green; margin-left: 5px;">‚úÖ</span>
            <span *ngIf="foodieForm.get('numeroPersonal')?.invalid && foodieForm.get('numeroPersonal')?.touched" style="color: red; margin-left: 5px;">‚ùå</span>
          </label>
          <div class="phone-input">
            <select class="country-code">
              <option value="+593">üá™üá®</option>
            </select>
            <input 
              type="tel" 
              id="numeroPersonal" 
              formControlName="numeroPersonal"
              placeholder="N√∫mero personal"
              class="form-control phone-number">
          </div>
        </div>

        <div class="form-group">
          <label for="fechaNacimiento">
            Fecha de nacimiento *
            <span *ngIf="foodieForm.get('fechaNacimiento')?.valid" style="color: green; margin-left: 5px;">‚úÖ</span>
            <span *ngIf="foodieForm.get('fechaNacimiento')?.invalid && foodieForm.get('fechaNacimiento')?.touched" style="color: red; margin-left: 5px;">‚ùå</span>
          </label>
          <input 
            type="date" 
            id="fechaNacimiento" 
            formControlName="fechaNacimiento"
            placeholder="Fecha de nacimiento"
            class="form-control">
        </div>

        <div class="form-group">
          <label>
            G√©nero *
            <span *ngIf="foodieForm.get('genero')?.valid" style="color: green; margin-left: 5px;">‚úÖ</span>
            <span *ngIf="foodieForm.get('genero')?.invalid && foodieForm.get('genero')?.touched" style="color: red; margin-left: 5px;">‚ùå</span>
          </label>
          <div class="radio-group">
            <label class="radio-label">
              <input type="radio" formControlName="genero" value="masculino">
              Masculino
            </label>
            <label class="radio-label">
              <input type="radio" formControlName="genero" value="femenino">
              Femenino
            </label>
          </div>
          <div *ngIf="foodieForm.get('genero')?.invalid && foodieForm.get('genero')?.touched" class="error-message">
            <small style="color: red;">Por favor selecciona tu g√©nero</small>
          </div>
        </div>

        <!-- Ubicaci√≥n -->
        <div class="form-group">
          <label for="paisDondeVives">
            Pa√≠s donde vives *
            <span *ngIf="foodieForm.get('paisDondeVives')?.valid" style="color: green; margin-left: 5px;">‚úÖ</span>
            <span *ngIf="foodieForm.get('paisDondeVives')?.invalid && foodieForm.get('paisDondeVives')?.touched" style="color: red; margin-left: 5px;">‚ùå</span>
          </label>
          <select id="paisDondeVives" formControlName="paisDondeVives" class="form-control">
            <option value="Ecuador">Pa√≠s</option>
            <option value="Ecuador">Ecuador</option>
          </select>
          <small class="form-note">(Solamente aceptamos Ecuador)</small>
        </div>

        <div class="form-group">
          <label for="ciudadDondeVives">
            Ciudad donde vives (no el sector, ni las calles, solo ciudad) *
            <span *ngIf="foodieForm.get('ciudadDondeVives')?.valid" style="color: green; margin-left: 5px;">‚úÖ</span>
            <span *ngIf="foodieForm.get('ciudadDondeVives')?.invalid && foodieForm.get('ciudadDondeVives')?.touched" style="color: red; margin-left: 5px;">‚ùå</span>
          </label>
          <input 
            type="text" 
            id="ciudadDondeVives" 
            formControlName="ciudadDondeVives"
            placeholder="Ciudad, no sector"
            class="form-control">
          <small class="form-note">(Solamente aceptamos o aquellos que viven en Quito)</small>
        </div>

        <!-- Redes Sociales -->
        <div class="form-group">
          <label for="nivelContenido">
            ¬øCada cu√°nto subes contenido en redes? *
            <span *ngIf="foodieForm.get('nivelContenido')?.valid" style="color: green; margin-left: 5px;">‚úÖ</span>
            <span *ngIf="foodieForm.get('nivelContenido')?.invalid && foodieForm.get('nivelContenido')?.touched" style="color: red; margin-left: 5px;">‚ùå</span>
          </label>
          <select id="nivelContenido" formControlName="nivelContenido" class="form-control">
            <option value="">Selecciona</option>
            <option value="diario">Diario</option>
            <option value="semanal">Semanal</option>
            <option value="quincenal">Quincenal</option>
            <option value="mensual">Mensual</option>
          </select>
        </div>

        <div class="form-group">
          <label for="usuarioInstagram">
            Usuario de Instagram *
            <span *ngIf="foodieForm.get('usuarioInstagram')?.valid" style="color: green; margin-left: 5px;">‚úÖ</span>
            <span *ngIf="foodieForm.get('usuarioInstagram')?.invalid && foodieForm.get('usuarioInstagram')?.touched" style="color: red; margin-left: 5px;">‚ùå</span>
          </label>
          <input 
            type="text" 
            id="usuarioInstagram" 
            formControlName="usuarioInstagram"
            placeholder="@usuario"
            class="form-control">
        </div>

        <div class="form-group">
          <label for="seguidoresInstagram">
            Seguidores en Instagram (sin puntos ni comas) *
            <span *ngIf="foodieForm.get('seguidoresInstagram')?.valid" style="color: green; margin-left: 5px;">‚úÖ</span>
            <span *ngIf="foodieForm.get('seguidoresInstagram')?.invalid && foodieForm.get('seguidoresInstagram')?.touched" style="color: red; margin-left: 5px;">‚ùå</span>
          </label>
          <input 
            type="number" 
            id="seguidoresInstagram" 
            formControlName="seguidoresInstagram"
            placeholder="ej: 2200"
            class="form-control"
            min="0"
            step="1"
            (input)="onFollowersInput($event, 'seguidoresInstagram')"
            (keypress)="onFollowersKeyPress($event)"
            (paste)="onFollowersPaste($event)">
          <small class="form-note">(SIN puntos ni comas, SOLO el n√∫mero)</small>
        </div>

        <div class="form-group">
          <label>
            ¬øTienes tu cuenta de Instagram p√∫blica? *
            <span *ngIf="foodieForm.get('cuentaPublica')?.valid" style="color: green; margin-left: 5px;">‚úÖ</span>
            <span *ngIf="foodieForm.get('cuentaPublica')?.invalid && foodieForm.get('cuentaPublica')?.touched" style="color: red; margin-left: 5px;">‚ùå</span>
          </label>
          <div class="radio-group">
            <label class="radio-label">
              <input type="radio" formControlName="cuentaPublica" value="si">
              S√≠, es p√∫blica.
            </label>
            <label class="radio-label">
              <input type="radio" formControlName="cuentaPublica" value="no">
              No, es privada.
            </label>
          </div>
          <small class="form-note">(Solo aceptamos cuentas p√∫blicas)</small>
          <div *ngIf="foodieForm.get('cuentaPublica')?.invalid && foodieForm.get('cuentaPublica')?.touched" class="error-message">
            <small style="color: red;">Por favor selecciona si tu cuenta es p√∫blica</small>
          </div>
        </div>

        <div class="form-group">
          <label for="usuarioTiktok">
            Usuario de TikTok *
            <span *ngIf="foodieForm.get('usuarioTiktok')?.valid" style="color: green; margin-left: 5px;">‚úÖ</span>
            <span *ngIf="foodieForm.get('usuarioTiktok')?.invalid && foodieForm.get('usuarioTiktok')?.touched" style="color: red; margin-left: 5px;">‚ùå</span>
          </label>
          <input 
            type="text" 
            id="usuarioTiktok" 
            formControlName="usuarioTiktok"
            placeholder="@usuario"
            class="form-control">
        </div>

        <div class="form-group">
          <label for="seguidoresTiktok">
            Seguidores en TikTok (sin puntos ni comas) *
            <span *ngIf="foodieForm.get('seguidoresTiktok')?.valid" style="color: green; margin-left: 5px;">‚úÖ</span>
            <span *ngIf="foodieForm.get('seguidoresTiktok')?.invalid && foodieForm.get('seguidoresTiktok')?.touched" style="color: red; margin-left: 5px;">‚ùå</span>
          </label>
          <input 
            type="number" 
            id="seguidoresTiktok" 
            formControlName="seguidoresTiktok"
            placeholder="ej: 2200"
            class="form-control"
            min="0"
            step="1"
            (input)="onFollowersInput($event, 'seguidoresTiktok')"
            (keypress)="onFollowersKeyPress($event)"
            (paste)="onFollowersPaste($event)">
          <small class="form-note">(SIN puntos ni comas, SOLO el n√∫mero)</small>
        </div>

        <!-- Descripci√≥n -->
        <div class="form-group">
          <label for="sobreTi">
            Sobre ti *
            <span *ngIf="foodieForm.get('sobreTi')?.valid" style="color: green; margin-left: 5px;">‚úÖ</span>
            <span *ngIf="foodieForm.get('sobreTi')?.invalid && foodieForm.get('sobreTi')?.touched" style="color: red; margin-left: 5px;">‚ùå</span>
          </label>
          <textarea 
            id="sobreTi" 
            formControlName="sobreTi"
            placeholder="Cu√©ntanos sobre tu experiencia creando contenido y lo que buscas con esta colaboraci√≥n (m√≠nimo 20 caracteres)..."
            class="form-control textarea"
            rows="4"></textarea>
          <small class="form-note">Caracteres: {{ foodieForm.get('sobreTi')?.value?.length || 0 }}/20 m√≠nimo</small>
          <div *ngIf="foodieForm.get('sobreTi')?.invalid && foodieForm.get('sobreTi')?.touched" class="error-message">
            <small style="color: red;">Describe m√°s sobre ti (m√≠nimo 20 caracteres)</small>
          </div>
        </div>

        <!-- T√©rminos -->
        <div class="form-group">
          <label>
            ¬øEntiendes los beneficios ofrecidos y est√°s de acuerdo en aceptarlos? *
            <span *ngIf="foodieForm.get('aceptaBeneficios')?.valid" style="color: green; margin-left: 5px;">‚úÖ</span>
            <span *ngIf="foodieForm.get('aceptaBeneficios')?.invalid && foodieForm.get('aceptaBeneficios')?.touched" style="color: red; margin-left: 5px;">‚ùå</span>
          </label>
          <div class="radio-group">
            <label class="radio-label">
              <input type="radio" formControlName="aceptaBeneficios" value="si">
              S√≠, estoy de acuerdo con los beneficios ofrecidos.
            </label>
            <label class="radio-label">
              <input type="radio" formControlName="aceptaBeneficios" value="no">
              No, no estoy de acuerdo con los beneficios. (no env√≠es tu aplicaci√≥n)
            </label>
          </div>
          <div *ngIf="foodieForm.get('aceptaBeneficios')?.invalid && foodieForm.get('aceptaBeneficios')?.touched" class="error-message">
            <small style="color: red;">Por favor selecciona una opci√≥n</small>
          </div>
        </div>

        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" formControlName="aceptaTerminos">
            Estoy de acuerdo en entregar mi informaci√≥n personal, que sea almacenada y tratada por FoodiesBNB. Tambi√©n estoy de acuerdo en ser contactado mediante los canales proporcionados.
            <span *ngIf="foodieForm.get('aceptaTerminos')?.valid" style="color: green; margin-left: 5px;">‚úÖ</span>
            <span *ngIf="foodieForm.get('aceptaTerminos')?.invalid && foodieForm.get('aceptaTerminos')?.touched" style="color: red; margin-left: 5px;">‚ùå</span>
          </label>
        </div>

        <!-- Botones -->
        <div class="form-actions">
          <!-- Estado del formulario para debugging -->
          <div *ngIf="!foodieForm.valid" style="margin-bottom: 15px; padding: 10px; background: #ffe6e6; border: 1px solid #ff9999; border-radius: 5px;">
            <p style="margin: 0; color: #cc0000; font-weight: bold;">‚ö†Ô∏è Faltan campos por completar:</p>
            <ul style="margin: 5px 0 0 20px; color: #cc0000;">
              <li *ngFor="let field of getInvalidFieldsList()" style="margin: 2px 0;">
                {{ field.displayName }}
              </li>
            </ul>
          </div>
          
          <button type="submit" class="submit-btn" [disabled]="!foodieForm.valid">
            {{ foodieForm.valid ? 'Enviar Aplicaci√≥n' : 'Completa todos los campos requeridos' }}
          </button>
        </div>
      </form>
    </main>
</div>
